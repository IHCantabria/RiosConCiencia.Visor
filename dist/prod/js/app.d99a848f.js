(function(e){function t(t){for(var n,o,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0f62":function(e,t,a){e.exports=a.p+"img/user.11fc63b1.svg"},2297:function(e,t,a){},"2edb":function(e,t,a){"use strict";var n=a("420e"),i=a.n(n);i.a},"2f25":function(e,t,a){"use strict";var n=a("fb53"),i=a.n(n);i.a},"331b":function(e,t,a){e.exports={primaryColor:"#1c313a"}},"3ca1":function(e,t,a){"use strict";var n=a("f9d9"),i=a.n(n);i.a},"420e":function(e,t,a){},"44f7":function(e,t,a){"use strict";var n=a("937c"),i=a.n(n);i.a},4914:function(e,t,a){},"4dbe":function(e,t,a){"use strict";var n=a("ab3b"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("a026"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-style grid",attrs:{id:"app"}},[a("viewer",{staticClass:"main"})],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view-viewer grid"},[a("app-map-viewer",{staticClass:"map"}),a("app-panels"),a("app-fetch-manager")],1)},s=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.samplesLoaded?n("div",{staticClass:"app-info"},[n("div",{staticClass:"panel-header"},[n("panel-about",{staticClass:"panel-about"}),e.userLogged?e._e():n("panel-login")],1),n("div",{staticClass:"panel-filters"},[n("panel-filters")],1),e.userLogged?n("div",{staticClass:"panel-download"},[n("span",{staticClass:"download-text"},[e._v("Descargar datos con los filtros activos")]),n("div",{staticClass:"download-icon",on:{click:e.launchDownload}},[n("object",{staticStyle:{"pointer-events":"none"},attrs:{data:a("6369"),type:"image/svg+xml"}})])]):e._e()]):e._e()},l=[],u=a("5530"),d=a("2f62"),p="samples/M_SET_SAMPLES",f="samples/M_SET_USER",m="samples/M_SET_YEAR_OPTIONS",h="samples/M_SET_SAMPLE_CAMPAIGN_FILTER",g="samples/M_SET_SAMPLE_YEAR_FILTER",y="samples/A_FETCH_SAMPLES",v="samples/A_FETCH_USER",b="samples/A_SET_SAMPLE_CAMPAIGN_FILTER",C="samples/A_SET_SAMPLE_YEAR_FILTER",k="samples/G_GET_SAMPLES_FILTERED",S="samples/G_GET_SAMPLES_FILTERED_IDS",_="samples/G_GET_USER_TOKEN",w="samples/G_GET_USER_LOGGED",M="samples/G_GET_SAMPLES_LOADED",O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-about"},[n("vs-dropdown",{staticClass:"toggler",attrs:{title:"Información","vs-trigger-click":"","vs-custom-content":""}},[n("div",{staticClass:"toggle-icon"},[n("object",{staticStyle:{"pointer-events":"none"},attrs:{data:a("79a0"),type:"image/svg+xml"}})]),n("vs-dropdown-menu",[n("div",{staticClass:"about-container"},[n("label",{staticClass:"label-version"},[n("span",[n("strong",[e._v("Geovisor de RiosConCiencia")])]),n("span",[n("strong",[e._v("Versión:")]),e._v(" "+e._s(e.version)+" ")])])])])],1)],1)},E=[],T={data:function(){return{version:"0.2.0"}}},x=T,j=(a("a98c"),a("2877")),D=Object(j["a"])(x,O,E,!1,null,"74b1bb59",null),I=D.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-filters"},[a("div",{staticClass:"variable-selectors"},[a("div",{staticClass:"type-selectors"},[a("type-selector",{staticClass:"type-selectors__selector",attrs:{label:"Selector de Año","width-select":"220px",items:e.yearOptions},on:{change:e.setYearFilter}}),a("type-selector",{staticClass:"type-selectors__selector",attrs:{label:"Selector de Campaña","width-select":"220px",items:e.campaignOptions},on:{change:e.setCampaignFilter}})],1)])])},$=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inner-container"},[e.isEmptyList?a("span",{staticClass:"empty-list"},[e._v("No Options available")]):a("vs-select",{attrs:{label:e.label,width:e.widthSelect,autocomplete:""},model:{value:e.activeItem,callback:function(t){e.activeItem=t},expression:"activeItem"}},e._l(e.items,(function(e,t){return a("vs-select-item",{key:t,staticClass:"selectStyle",attrs:{value:e,text:e.name}})})),1)],1)},q=[],P={props:{items:{type:Array,required:!0},label:{type:String,required:!1,default:function(){return""}},widthSelect:{type:String,required:!1,default:function(){return"400px"}},lastActiveItem:{type:Object,required:!1,default:function(){return null}}},data:function(){return{activeItem:{}}},computed:{isEmptyList:function(){return 0===this.items.length}},watch:{items:{handler:function(){this.selectFirstOption()},immediate:!0},activeItem:{handler:function(){this.activeItem&&this.$emit("change",this.activeItem)},deep:!0}},mounted:function(){this.activeItem=this.lastActiveItem?this.lastActiveItem:null,this.activeItem||this.selectFirstOption()},methods:{selectFirstOption:function(){var e=this;this.$nextTick((function(){e.activeItem=e.items[0]}))}}},R=P,B=(a("4dbe"),Object(j["a"])(R,F,q,!1,null,"b23c3ed2",null)),G=B.exports,N={components:{"type-selector":G},computed:Object(u["a"])({},Object(d["d"])({campaignOptions:function(e){return e.samples.campaignOptions},yearOptions:function(e){return e.samples.yearOptions}})),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])({setSampleCampaignFilter:b,setSampleYearFilter:C})),{},{setCampaignFilter:function(e){this.setSampleCampaignFilter(e)},setYearFilter:function(e){this.setSampleYearFilter(e)}})},U=N,Q=(a("ab39"),Object(j["a"])(U,A,$,!1,null,"781b6a6f",null)),z=Q.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-login"},[n("div",{staticClass:"login-icon",attrs:{title:"Login de usuario"},on:{click:e.openModal}},[n("object",{staticStyle:{"pointer-events":"none"},attrs:{data:a("0f62"),type:"image/svg+xml"}})]),n("vs-popup",{attrs:{"class-content":"popup-login",title:"Login a la descarga de datos",active:e.modalState},on:{"update:active":function(t){e.modalState=t}}},[n("div",{staticClass:"login-container"},[n("vs-input",{staticClass:"item-login",attrs:{type:"text",label:"Usuario de la aplicación",icon:"account_circle",placeholder:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("vs-input",{staticClass:"item-login",attrs:{type:"password",label:"Contraseña de usuario",icon:"lock",placeholder:"contraseña"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("vs-button",{staticClass:"item-login item-login-buttom",attrs:{color:"primary",type:"filled"},on:{click:e.callLogin}},[e._v("Login")])],1)])],1)},V=[],Y={data:function(){return{email:null,password:null,modalState:!1}},computed:{},methods:{openModal:function(){this.modalState=!0},callLogin:function(){this.modalState=!1;var e={email:this.email,password:this.password};this.$root.$emit("callLogin",e)}}},Z=Y,W=(a("2edb"),Object(j["a"])(Z,H,V,!1,null,"bd1bf35c",null)),J=W.exports,K={components:{"panel-about":I,"panel-login":J,"panel-filters":z},computed:Object(u["a"])({},Object(d["c"])({userLogged:[w],samplesLoaded:[M]})),methods:{launchDownload:function(){this.$root.$emit("callDownload")}}},X=K,ee=(a("89d6"),Object(j["a"])(X,c,l,!1,null,"511f5a6f",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-map-viewer"},[a("l-map",{attrs:{"c-center":e.mapConfigComputed.centerConfig,"c-map-default":e.mapConfigComputed.mapDefaultConfig,"c-base-layers":e.mapConfigComputed.baseLayersConfig,"c-switch-layer-base-maps":e.mapConfigComputed.switchBaseMapsConfig,"c-overlay-layers":e.mapConfigComputed.overlayLayersConfig,"c-switch-layer-overlay-maps":e.mapConfigComputed.switchOverlayMapsConfig,"c-markers":e.markers}})],1)},ne=[],ie=a("2909"),re=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},oe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l-map"},[a("div",{staticClass:"l-map__view",attrs:{id:"mapid"}})])}],se=(a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("b0c0"),a("2532"),a("159b"),a("96cf"),a("1da1")),ce=a("e11e"),le=a.n(ce),ue=(a("f0cb"),a("9ef7"),a("99af"),a("a15b"),{type:"marker"}),de=[{id:"waterQualityID",icon:"Water"},{id:"forestQualityID",icon:"Forest"},{id:"ecologicalStateID",icon:"Ecological"}],pe=[{id:"waterQualityID",key:"bioQualityColor"},{id:"forestQualityID",key:"forestStateColor"},{id:"ecologicalStateID",key:"ecologicalStateColor"}],fe=[{id:0,color:"blue-dark",name:"No hay Datos",colorCode:"#184055"},{id:1,color:"green",name:"Muy Buena",colorCode:"#00842d"},{id:2,color:"green-light",name:"Buena",colorCode:"#4a9a29"},{id:3,color:"yellow",name:"Moderada",colorCode:"#f3ac23"},{id:4,color:"orange",name:"Deficiente",colorCode:"#ea7817"},{id:5,color:"red",name:"Mala",colorCode:"#cc2518"},{id:6,color:"cyan",name:"No Calculable",colorCode:"#1d92d4"}],me=[{id:1,name:"Primavera"},{id:2,name:"Otoño"}],he=[{id:0,color:"blue-dark",name:"No hay Datos",colorCode:"#184055"},{id:1,color:"green",name:"Alta, bien conservado",colorCode:"#00842d"},{id:2,color:"yellow",name:"Media, alteración importante",colorCode:"#f3ac23"},{id:3,color:"red",name:"Muy degradado",colorCode:"#cc2518"}],ge=[{id:0,color:"blue-dark",name:"No hay Datos",colorCode:"#184055"},{id:1,color:"green",name:"Muy Bueno",colorCode:"#00842d"},{id:2,color:"green-light",name:"Bueno",colorCode:"#4a9a29"},{id:3,color:"yellow",name:"Moderado",colorCode:"#f3ac23"},{id:4,color:"orange",name:"Deficiente",colorCode:"#ea7817"},{id:5,color:"red",name:"Malo",colorCode:"#cc2518"},{id:6,color:"cyan",name:"No Calculable",colorCode:"#1d92d4"}],ye=function(){delete L.Icon.Default.prototype._getIconUrl,L.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")})},ve=function(e){var t=de.find((function(t){return t.id==e})).icon;return t},be=function(e){var t=pe.find((function(t){return t.id==e})).key;return t},Ce=function(e,t){return L.ExtraMarkers.icon({markerColor:"".concat(t),innerHTML:"<i class='icon-sensors icon-sensors__".concat(e,"'></i>")})},ke=function(e){return'<table>\n    <tbody>\n      <tr>\n        <th scope="row">Río</th>\n        <td>'.concat(e.river,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Tipo de corriente</th>\n        <td>').concat(e.riverType,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Cuenca</th>\n        <td>').concat(e.catchment,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Alias del tramo</th>\n        <td>').concat(e.alias,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Municipio del tramo</th>\n        <td>').concat(e.municipality,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Año de muestra</th>\n        <td>').concat(e.year,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Campaña de muestra</th>\n        <td>').concat(e.campaign,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Calidad del Agua</th>\n        <td>').concat(e.bioQuality,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Calidad del Bosque de Rivera</th>\n        <td>').concat(e.forestState,'</td>\n      </tr>\n      <tr>\n        <th scope="row">Estado Ecológico</th>\n        <td>').concat(e.ecologicalState,"</td>\n      </tr>\n    </tbody>\n  </table>")},Se=function(e){return"<p>\n      <strong>Calidad del Agua:</strong> ".concat(e.bioQuality,"</br>\n      <strong>Calidad del Bosque de Rivera:</strong> ").concat(e.forestState,"</br>\n      <strong>Estado Ecológico:</strong> ").concat(e.ecologicalState,"\n    </p>")},Le=function(e,t){var a,n=['<strong class="title-legend">'.concat(e,"</strong>")];return t.forEach((function(e){a+=n.push('<span class="item-legend"><i class="circle-dot" style="background-color: '.concat(e.colorCode,'"></i> ').concat(e.name,"</span>"))})),a=n.join(""),a},_e=function(e){var t=L.DomUtil.create("div","leaflet-control-layers leaflet-control custom-legend");return t.innerHTML=e,t};ye();var we,Me,Oe,Ee={props:{cCenter:{type:Object,required:!0},cBaseLayers:{type:Array,required:!1,default:function(){return[{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",configParameters:{id:"defaultMapID",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}]}},cMapDefault:{type:Object,required:!1,default:function(){return{center:[0,0],zoom:3,layers:["defaultMapID"]}}},cSwitchLayerBaseMaps:{type:Array,required:!1,default:function(){return[]}},cOverlayLayers:{type:Array,required:!1,default:function(){return[]}},cSwitchLayerOverlayMaps:{type:Array,required:!1,default:function(){return[]}},cMarkers:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{myMap:null,layersMap:[],layerMarkers:[],currentLegend:null}},watch:{cMarkers:{handler:function(){this.updateLayerMarker()},deep:!0}},mounted:function(){var e=this;this.$nextTick((function(){e.initMap()}))},methods:{initMap:function(){var e=this;return Object(se["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadMap();case 1:case"end":return t.stop()}}),t)})))()},loadMap:function(){var e=this;this.loadTileLayers();var t=this.layersMap.filter((function(t){return e.cMapDefault.layers.includes(t.options.id)}));this.setMap(t),this.setupSwitcherLayer(),this.setupLegend(),this.setupListeners()},loadTileLayers:function(){var e=[];this.cBaseLayers.forEach((function(t){var a=le.a.tileLayer(t.url,t.configParameters);e.push(a)})),this.layersMap=e},setMap:function(e){var t=this.setMapBounds();this.myMap=le.a.map("mapid",{center:this.cMapDefault.center,zoom:this.cMapDefault.zoom,minZoom:this.cMapDefault.minZoom,layers:e,maxBounds:t,maxBoundsViscosity:1,worldCopyJump:!0}).setView([this.cCenter.lat,this.cCenter.lon],this.cCenter.zoom)},setMapBounds:function(){return le.a.latLngBounds(le.a.latLng(-90,-1/0),le.a.latLng(90,1/0))},setupSwitcherLayer:function(){if(this.cSwitchLayerBaseMaps.length>0){var e=this.createSwitchBaseLayers(),t=this.createSwitchOverlayLayers(),a={exclusiveGroups:["Filtros"],groupCheckboxes:!0};le.a.control.groupedLayers(e,t,a).addTo(this.myMap)}},setupLegend:function(){this.createLegend(this.layerMarkers[0].options.legend)},createSwitchBaseLayers:function(){var e=this,t={};return this.cSwitchLayerBaseMaps.forEach((function(a){var n=e.layersMap.find((function(e){return e.options.id==a.idLayer}));t[a.displayLayerName]=n})),t},createSwitchOverlayLayers:function(){var e=this,t={},a={};return this.cOverlayLayers.forEach((function(t){var n=new le.a.LayerGroup([],t.configParameters);a[t.name]=n,e.layerMarkers.push(n)})),t["Filtros"]=a,this.layerMarkers[0].addTo(this.myMap),t},updateLayerMarker:function(){this.clearLayerMarkers(),this.cMarkers.length>0&&this.addNewLayerMarkers()},addNewLayerMarkers:function(){var e=this;this.layerMarkers.forEach((function(t){e.createLayerMarkers(t)}))},createLayerMarkers:function(e){var t=this;this.cMarkers.forEach((function(a){t.createLayerMarker(a,e)}))},createLayerMarker:function(e,t){var a=ve(t.options.id),n=be(t.options.id),i=e[n],r=le.a.marker({lon:e.longitude,lat:e.latitude},{icon:Ce(a,i)}),o=ke(e),s=Se(e);r.layerID=e.id,r.type=e.type,r.bindPopup(o),r.bindTooltip(s),t.addLayer(r)},clearLayerMarkers:function(){this.layerMarkers.forEach((function(e){var t=e.getLayers();t.forEach((function(t){e.removeLayer(t)}))}))},setupListeners:function(){this.ListenerLegendChange()},ListenerLegendChange:function(){var e=this;this.myMap.on("overlayadd",(function(t){e.myMap.removeControl(e.currentLegend),e.createLegend(t.layer.options.legend)}))},createLegend:function(e){var t=le.a.control({position:"topright"});t.onAdd=function(){var t=_e(e);return t},this.currentLegend=t,t.addTo(this.myMap)}}},Te=Ee,xe=(a("9641"),a("b722"),a("6b66"),a("2f25"),Object(j["a"])(Te,re,oe,!1,null,"0fe1f9d1",null)),je=xe.exports,De={name:"Mapa Satelite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",configParameters:{id:"MapSateliteID",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",minZoom:10,maxZoom:16}},Ie={name:"Calidad del agua",configParameters:{id:"waterQualityID",legend:Le("Calidad del agua",fe)}},Ae={name:"Estado del bosque",configParameters:{id:"forestQualityID",legend:Le("Estado del bosque",he)}},$e={name:"Estado ecológico",configParameters:{id:"ecologicalStateID",legend:Le("Estado ecológico",ge)}},Fe={lat:43.2,lon:-3.9,zoom:10,minZoom:10,maxZoom:16},qe={center:[Fe.lat,Fe.lon],zoom:Fe.zoom,layers:[De.configParameters.id]},Pe=[De],Re=[{displayLayerName:De.name,idLayer:De.configParameters.id}],Be=[Ie,Ae,$e],Ge=[{displayLayerName:Ie.name,idLayer:Ie.configParameters.id},{displayLayerName:Ae.name,idLayer:Ae.configParameters.id},{displayLayerName:$e.name,idLayer:$e.configParameters.id}],Ne={centerDefault:Fe,mapDefaultConfig:qe,baseLayersConfig:Pe,switchBaseMapsConfig:Re,overlayLayersConfig:Be,switchOverlayMapsConfig:Ge},Ue={components:{"l-map":je},data:function(){return{leafletConfig:Ne}},computed:Object(u["a"])(Object(u["a"])({},Object(d["c"])({samples:[k]})),{},{markers:function(){return Object(ie["a"])(this.samples)},mapConfigComputed:function(){return{centerConfig:this.leafletConfig.centerDefault,baseLayersConfig:this.leafletConfig.baseLayersConfig,mapDefaultConfig:this.leafletConfig.mapDefaultConfig,switchBaseMapsConfig:this.leafletConfig.switchBaseMapsConfig,overlayLayersConfig:this.leafletConfig.overlayLayersConfig,switchOverlayMapsConfig:this.leafletConfig.switchOverlayMapsConfig}}})},Qe=Ue,ze=Object(j["a"])(Qe,ae,ne,!1,null,null,null),He=ze.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-fetch-manager"},[e.requestComputed?a("async-loader",{attrs:{url:e.request.url,params:e.request.params?e.request.params:{},method:e.request.method?e.request.method:"get",body:e.request.body?e.request.body:{}},on:{requestFinished:e.requestsController,stateRequest:e.pendingState,errorHandler:e.errorHandler}}):e._e(),e.operationComputed&&e.dataReady?a("data-operator",{attrs:{data:e.data?e.data:null,"process-logic":e.operation.processLogic?e.operation.processLogic:null,dispatcher:e.operation.dispatcher?e.operation.dispatcher:null,"additional-info":e.operation.additionalInfo?e.operation.additionalInfo:null},on:{dataProcessed:e.operationsFinishedEvent,operationFinished:e.operationsController}}):e._e()],1)},Ye=[],Ze=(a("a4d3"),a("e01a"),a("c975"),function(e){var t=fe.find((function(t){return t.id==e})).color;return t||(t=fe.find((function(e){return 0==e.id})).color),t}),We=function(e){var t=he.find((function(t){return t.id==e})).color;return t||(t=he.find((function(e){return 0==e.id})).color),t},Je=function(e){var t=ge.find((function(t){return t.id==e})).color;return t||(t=ge.find((function(e){return 0==e.id})).color),t},Ke=function(e){var t=me.find((function(t){return t.name==e})).id;return t||(t=0),t},Xe=function(e){for(var t=e.map((function(e){return e.year})).filter((function(e,t,a){return a.indexOf(e)===t})),a=t.sort((function(e,t){return e-t})),n=[],i=0;i<a.length;i++)n.push({id:i+1,name:a[i]});return n},et={methods:{formatSamples:function(e){return e.map((function(e){return{bioQuality:e.bioQualityName,ecologicalState:e.ecologicalStateName,forestState:e.riverBankQrisiName,alias:e.riverSectionAlias,municipality:e.riverSectionMunicipality,river:e.riverName,riverType:e.riverType,catchment:e.riverCatchment,id:e.id,idBioQuality:e.idBioQuality,bioQualityColor:Ze(e.idBioQuality),idForestState:e.idRiverBankQrisi,forestStateColor:We(e.idRiverBankQrisi),idEcologicalState:e.idEcologicalState,ecologicalStateColor:Je(e.idEcologicalState),campaign:e.campaign,year:e.year,type:ue.type,idCampaign:Ke(e.campaign),longitude:e.samplePointCoordsLon,latitude:e.samplePointCoordsLat}}))}}},tt={methods:{$_showNotificationRepeat:function(e,t){this.$vs.notify({title:"Error en la operación de ".concat(e),text:"Haga click para reintentar",color:"danger",fixed:!0,click:t})},$_showNotificationOnce:function(e,t){this.$vs.notify({title:"Error en la operación de ".concat(e),text:"".concat(t),color:"danger"})}}},at={props:{data:{type:[Array,Object],default:function(){return null},required:!1},processLogic:{type:Function,default:function(){return null},required:!1},dispatcher:{type:String,default:function(){return null},required:!1},additionalInfo:{type:Object,default:function(){return null},required:!1}},watch:{data:{handler:function(){this.init()},deep:!0},processLogic:{handler:function(){this.init()},deep:!0},dispatcher:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){this.data?this.prepareData():this.callDispatcher()},prepareData:function(){var e=this.Operate();this.dispatcher?this.$store.dispatch(this.dispatcher,e):this.$emit("dataProcessed",e),this.$emit("operationFinished")},Operate:function(){return this.additionalInfo&&this.processLogic?this.processLogic(this.data,this.additionalInfo):this.processLogic?this.processLogic(this.data):this.data},callDispatcher:function(){this.$store.dispatch(this.dispatcher),this.$emit("operationFinished")}},render:function(){return null}},nt=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("bc3a")),it=a.n(nt),rt={props:{url:{type:String,default:function(){return""},required:!0},params:{type:Object,required:!1,default:function(){return{}}},method:{type:String,required:!0,default:function(){return"get"}},body:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{pending:!1,error:!1,data:null}},watch:{url:function(){this.init()},params:{handler:function(){!this.pending&&this.init()},deep:!0},pending:{handler:function(e){this.$emit("stateRequest",e)}}},mounted:function(){this.init()},methods:{init:function(){this.setDefaultValues(),this.requestData()},requestData:function(){var e=this;return Object(se["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pending=!0,t.prev=1,"postFile"!=e.method){t.next=8;break}return t.next=5,it.a.post(e.url,e.body,{responseType:"arraybuffer",headers:e.params}).then((function(e){var t=new Blob([e.data],{type:"application/zip"}),a=window.URL.createObjectURL(t),n=document.createElement("a");return n.href=a,n.setAttribute("download","Muestras.zip"),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(a),!0}));case 5:e.data=[],t.next=21;break;case 8:if("get"!=e.method){t.next=16;break}return t.next=11,it.a.get(e.url,{headers:e.params});case 11:a=t.sent,n=a.data,e.data=n,t.next=21;break;case 16:return t.next=18,it.a.post(e.url,e.body,{headers:e.params});case 18:i=t.sent,r=i.data,e.data=r;case 21:e.error=!1,t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](1),e.data=null,e.error=t.t0;case 28:return t.prev=28,e.pending=!1,e.$nextTick((function(){e.$emit("errorHandler",e.error),e.$emit("requestFinished",e.data)})),t.finish(28);case 32:case"end":return t.stop()}}),t,null,[[1,24,28,32]])})))()},setDefaultValues:function(){this.error=!1,this.data=null}},render:function(){return null}},ot={public:"https://apiriosconciencia.ihcantabria.com/v1/public",private:"https://apiriosconciencia.ihcantabria.com/v1/private"},st={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},ct=function(){var e="".concat(ot.public,"/RiosConCiencia/GetSamplesExtended");return{url:e,params:st,method:"get",body:{}}},lt=function(e,t){var a="".concat(ot.public,"/RiosConCiencia/ExportSamples/csv");st.Authorization="Bearer ".concat(e);var n={year:t.year,campaign:t.campaign,samplesId:t.samplesId};return{url:a,params:st,method:"postFile",body:n}},ut=function(e){var t="".concat(ot.public,"/RiosConCiencia/Authenticate"),a={email:e.email,password:e.password};return{url:t,params:st,method:"post",body:a}},dt={components:{"async-loader":rt,"data-operator":at},mixins:[et,tt],data:function(){return{request:null,operation:null,dataReady:!1,requestState:!1,data:null,pendingTasks:[],currentSpinnerTask:null}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(d["d"])({yearFilter:function(e){return e.samples.yearFilter},campaignFilter:function(e){return e.samples.campaignFilter}})),Object(d["c"])({samplesIds:[S],token:[_]})),{},{requestComputed:function(){return this.request},requestStateComputed:function(){return this.requestState},operationComputed:function(){return this.operation}}),watch:{pendingTasks:{handler:function(){this.manageTasks()}}},mounted:function(){this.init()},methods:{init:function(){this.setActionListeners(),this.fetchSamplesData()},setActionListeners:function(){var e=this;this.$root.$on("callDownload",(function(){e.fetchCsvData()})),this.$root.$on("callLogin",(function(t){e.authenticate(t)}))},requestsController:function(e){this.data=e,this.dataReady=!0},pendingState:function(e){this.requestState=e},errorHandler:function(e){if(e){var t=this.logicMessageError(e);this.$_showNotificationOnce("".concat(this.currentSpinnerTask.id),"".concat(t))}},logicMessageError:function(e){return e.response.data.messages},operationsFinishedEvent:function(){},operationsController:function(){this.dataReady=!1,this.request=null,this.data=null,this.updateSpinnerTask(this.currentSpinnerTask),this.currentSpinnerTask=null,this.pendingTasks.shift()},manageSpinnerState:function(e){1==e?this.$spinner.show():this.$spinner.hide()},manageTasks:function(){if(this.pendingTasks.length>0){var e=this.pendingTasks[0];this.request=e.request,this.operation=e.operation,this.currentSpinnerTask=e.spinnerTask,this.dataReady=!!this.operation.dataless}else this.dataReady=!0,this.request=null,this.operation=null},fetchSamplesData:function(){this.createTask(ct(),this.formatSamples,y,this.createSpinnerTask("Datos de Muestreo","Recopilando datos de muestras. Por favor, espere..."))},authenticate:function(e){this.createTask(ut(e),null,v,this.createSpinnerTask("Validando Usuario","Validando credenciales de acceso. Por favor, espere..."))},fetchCsvData:function(){var e={year:this.yearFilter.name,campaign:this.campaignFilter.name,samplesId:this.samplesIds};this.createTask(lt(this.token,e),null,null,this.createSpinnerTask("Descargando Datos","Descargando archivos de muestras. Por favor, espere..."))},createTask:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=e,s={processLogic:t,dispatcher:a,dataless:i,additionalInfo:r};this.pendingTasks.push({request:o,operation:s,spinnerTask:n}),this.addSpinnerTask(n)},createSpinnerTask:function(e,t){return{id:e,description:t}},addSpinnerTask:function(e){e&&this.$spinner.addTask(e.id,e.description),this.manageSpinnerState(!0)},updateSpinnerTask:function(e){e&&this.$spinner.updateTask(e.id,this.$spinnerEnums.statusTask.completed),this.manageSpinnerState(!1)}}},pt=dt,ft=Object(j["a"])(pt,Ve,Ye,!1,null,null,null),mt=ft.exports,ht={components:{"app-map-viewer":He,"app-panels":te,"app-fetch-manager":mt}},gt=ht,yt=(a("afb7"),a("44f7"),Object(j["a"])(gt,o,s,!1,null,"729fd7fe",null)),vt=yt.exports,bt={components:{viewer:vt},mounted:function(){this.init()},methods:{init:function(){this.$spinner.configureModeSpinner(this.$spinnerEnums.ModesSpinner.progress)}}},Ct=bt,kt=Object(j["a"])(Ct,i,r,!1,null,null,null),St=kt.exports,Lt=a("ade3"),_t={samples:null,samplesFull:null,yearFilter:{},yearOptions:[],campaignFilter:{},campaignOptions:me,user:null},wt=(we={},Object(Lt["a"])(we,p,(function(e,t){e.samples=t.samples})),Object(Lt["a"])(we,f,(function(e,t){e.user=t.user})),Object(Lt["a"])(we,m,(function(e,t){e.yearOptions=t.yearOptions})),Object(Lt["a"])(we,h,(function(e,t){e.campaignFilter=t.campaignFilter})),Object(Lt["a"])(we,g,(function(e,t){e.yearFilter=t.yearFilter})),we),Mt=(Me={},Object(Lt["a"])(Me,y,(function(e,t){var a=e.commit;a(p,{samples:t});var n=Xe(t);a(m,{yearOptions:n})})),Object(Lt["a"])(Me,v,(function(e,t){var a=e.commit;a(f,{user:t})})),Object(Lt["a"])(Me,b,(function(e,t){var a=e.commit;a(h,{campaignFilter:t})})),Object(Lt["a"])(Me,C,(function(e,t){var a=e.commit;a(g,{yearFilter:t})})),Me),Ot=(Oe={},Object(Lt["a"])(Oe,k,(function(e){return e.samples?e.samples.filter((function(t){return t.year==e.yearFilter.name&&t.idCampaign==e.campaignFilter.id})):[]})),Object(Lt["a"])(Oe,S,(function(e,t){return t[k].map((function(e){return e.id}))})),Object(Lt["a"])(Oe,_,(function(e){return e.user?e.user.token:""})),Object(Lt["a"])(Oe,w,(function(e){return!!e.user})),Object(Lt["a"])(Oe,M,(function(e){return!!e.samples})),Oe),Et={state:_t,mutations:wt,actions:Mt,getters:Ot};n["default"].use(d["a"]);var Tt=new d["a"].Store({modules:{samples:Et}}),xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("sweet-modal",{ref:"loader",staticClass:"app-style",attrs:{title:e.mlTitle,blocking:e.mlBlocking,"hide-close-button":e.mlHideCloseButton,"pulse-on-block":e.mlPulseOnBlock,icon:e.mlIcon,width:e.mlWidth,"enable-mobile-fullscreen":e.mlEnableMobileFullscreen,"overlay-theme":e.mlOverlayTheme,"modal-theme":e.mlModalTheme}},[a("div",{staticClass:"loading-panel"},[a("div",{staticClass:"loading-icon"},[a("circle-loader",{attrs:{loading:e.mlActive,color:e.mlSpinnerColor}})],1),a("div",{staticClass:"loading-text"},[e._v(e._s(e.mlDisplayText))]),3==e.mlMode?a("div",{staticClass:"loading-table"},[a("vs-table",{attrs:{data:e.mlTasksConfig,"no-data-text":"","max-items":"2"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data;return e._l(n.tasks,(function(t,i){return a("vs-tr",{key:i},[a("vs-td",{staticClass:"loading-table__task",attrs:{data:n.tasks[i].text}},[e._v(e._s(n.tasks[i].text))]),n.loadingBar?a("vs-td",{staticClass:"loading-table__progress"},[n.tasks[i].completed?n.tasks[i].success?a("vs-progress",{attrs:{percent:100,color:"success"}}):a("vs-progress",{attrs:{percent:100,color:"danger"}}):a("vs-progress",{attrs:{indeterminate:"",color:"primary"}})],1):a("vs-td",{staticClass:"loading-table__status"},[n.tasks[i].completed?n.tasks[i].success?a("vs-icon",{attrs:{icon:"pet"}}):a("vs-icon",{attrs:{icon:"android"}}):a("vs-icon",{attrs:{icon:"polymer"}})],1)],1)}))}}],null,!1,939454026)})],1):e._e()])])},jt=[],Dt=(a("c740"),a("dca8"),{statusTask:Object.freeze({pending:1,failed:2,completed:3}),ModesSpinner:Object.freeze({basic:1,progress:2,subTasks:3})}),It={title:"Cargando Datos",text:"Cargando datos. Por favor, espere...",mode:Dt.ModesSpinner.basic,color:"#1c313a",tasksConfig:{loadingBar:!1,tasks:[]}},At=a("b0ae"),$t=a("05c2"),Ft={components:{"sweet-modal":At["a"],"circle-loader":$t["CircleLoader"]},data:function(){return{mlBlocking:!0,mlHideCloseButton:!0,mlPulseOnBlock:!0,mlIcon:null,mlWidth:null,mlEnableMobileFullscreen:!1,mlOverlayTheme:"light",mlModalTheme:"light",spinnerConfig:It,spinnerEnums:Dt,mlActive:!1,calls:0}},computed:{mlTitle:function(){return this.spinnerConfig&&this.spinnerConfig.title?this.spinnerConfig.title:"Recopilando"},mlMode:function(){return this.spinnerConfig&&this.spinnerConfig.mode?this.spinnerConfig.mode:1},mlText:function(){return this.spinnerConfig&&this.spinnerConfig.text?this.spinnerConfig.text:"Preparando carga de datos. Por favor, espere..."},mlTasksConfig:function(){return this.spinnerConfig&&this.spinnerConfig.tasksConfig?this.spinnerConfig.tasksConfig:null},mlDisplayText:function(){return 1==this.mlMode?this.mlText:this._taskManagerDisplay()},mlSpinnerColor:function(){return this.spinnerConfig&&this.spinnerConfig.color?this.spinnerConfig.color:"#05346d"}},watch:{mlActive:function(){this.mlActive?this.$refs.loader.open&&this.$refs.loader.open():this.$refs.loader.close&&this.$refs.loader.close()}},methods:{configureModeSpinner:function(e){this.spinnerConfig.mode=e},show:function(){this.calls++,this.mlActive=!0},hide:function(){this.calls--,0==this.calls&&(this.mlActive=!1),0==this.calls&&this._clearTasks()},addTask:function(e,t){this.spinnerConfig.tasksConfig.tasks.push({id:this.spinnerConfig.tasksConfig.tasks.length+1,name:e,text:t,status:this.spinnerEnums.statusTask.pending})},updateTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.spinnerConfig.tasksConfig.tasks.findIndex((function(t){return t.name===e}));t&&(this.spinnerConfig.tasksConfig.tasks[n].status=t),a&&(this.spinnerConfig.tasksConfig.tasks[n].text=a)},_clearTasks:function(){this.mlTasksConfig.tasks=[]},_taskManagerDisplay:function(){var e=this,t=this.mlTasksConfig.tasks.find((function(t){return t.status===e.spinnerEnums.statusTask.pending}));return null==t?this.mlText:t.text}}},qt=Ft,Pt=(a("3ca1"),Object(j["a"])(qt,xt,jt,!1,null,"236e20a6",null)),Rt=Pt.exports,Bt=a("331b"),Gt=a.n(Bt),Nt={data:function(){return Object(u["a"])({},Gt.a)}},Ut=(a("8975"),a("fb9a")),Qt=a.n(Ut),zt=(a("8fc0"),new n["default"](Rt).$mount());n["default"].prototype.$spinner=zt,n["default"].prototype.$spinnerEnums=Dt,document.body.appendChild(zt.$el),n["default"].mixin(Nt),n["default"].config.productionTip=!1,n["default"].use(Qt.a,{theme:{colors:{primary:Bt["primaryColor"]}}}),new n["default"]({store:Tt,render:function(e){return e(St)}}).$mount("#app")},6369:function(e,t,a){e.exports=a.p+"img/download.5de6bb17.svg"},"79a0":function(e,t,a){e.exports=a.p+"img/about.bcc23f1d.svg"},8975:function(e,t){},"89d6":function(e,t,a){"use strict";var n=a("4914"),i=a.n(n);i.a},"8fc0":function(e,t,a){},"937c":function(e,t,a){},"99f9":function(e,t,a){},a98c:function(e,t,a){"use strict";var n=a("99f9"),i=a.n(n);i.a},ab39:function(e,t,a){"use strict";var n=a("2297"),i=a.n(n);i.a},ab3b:function(e,t,a){},f9d9:function(e,t,a){},fb53:function(e,t,a){}});